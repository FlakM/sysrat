# sysrat


## Building on linux

### Prerequisites

1. Install a rust stable toolchain: `rustup install stable`
1. Install a rust nightly toolchain: `rustup install nightly`
1. Install bpf-linker: `cargo install bpf-linker`

### Building and running

Application needs to be run with root privileges, for convenience in `.cargo/config.toml` there is a custom runner set to `sudo -E`. So you might just run `cargo run` and it should work.


## Building on macOS

### Prerequisites

1. Disable SIP (System Integrity Protection) by booting into recovery mode and running the following command:

```sh
csrutil disable
# or alternatively but it might hang the system:
csrutil enable --without dtrace
```
There is a known [bug](https://developer.apple.com/forums/thread/735939) in macOS which results in the system hanging and requiring a hard reboot.

Running on mac os is not tested yet.

## Built using


This is a [Ratatui] app generated by the [event driven template].

[Ratatui]: https://ratatui.rs
[event driven template]: https://github.com/ratatui/templates/tree/main/event-driven

It's also heavily inspired by `bpftrace` and `execsnoop` script.


## License

Copyright (c) FlakM <coder@flakm.com>

This project is licensed under the MIT license ([LICENSE] or <http://opensource.org/licenses/MIT>)

[LICENSE]: ./LICENSE


## TODO


- [ ] remove the dependency on `bpftrace` and use aya-rs instead
- [ ] add counting of the processes (if they are similar) to avoid spamming the output - there can be some kind of label incremented
- [ ] calculate the size of the window rendered to gather the number of maximum processes to display. Maybe we can just show like 200?
- [ ] add details for a parent process based on /proc data
- [ ] add ability to filter by regex
- [ ] add ability to filter by some data on kernel side using maps
- [ ] refactor getting the processes code into seperate module
- [ ] add the description what this project does and what it does not
